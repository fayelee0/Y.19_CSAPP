#+AUTHOR: Fei Li
#+EMAIL: wizard@pursuetao.com
* Practice 41

  #+BEGIN_SRC c

  struct prob {
      int* p;
      struct {
          int x;
          int y;
      } s;
      struct prob* next;
  };


  void sp_init(struct prob* sp) 
  {
      sp->s.x  = ;
      sp->p    = ;
      sp->next = ;
  }
  
  #+END_SRC

** A  

   p:          0
   s.x:        8
   s.y:        12
   next:       16


** B

   24


** C   

   #+BEGIN_SRC asm

   ; void sp_init(struct prob* sp)
   ; sp in %rdi
   sp_init:
     movl 12(%rdi), %eax
     movl %eax, 8(%rdi)
     leaq 8(%rdi), %rax
     movq %rax, (%rdi)
     movq %rdi, 16(%rdi)
     ret
   
   #+END_SRC


   #+BEGIN_SRC c

   void sp_init(struct prob* sp)
   {
       sp->s.x  = sp->s.y;
       sp->p    = &(sp->s.x);
       sp->next = sp;
   }
   
   #+END_SRC

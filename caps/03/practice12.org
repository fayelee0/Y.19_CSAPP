#+AUTHOR: Fei Li
#+EMAIL: wizard@pursuetao.com
* Practice 12

  #+BEGIN_SRC c

  void uremdiv(unsigned long x, unsigned long y, unsigned long* qp, unsigned long* rp)
  {
      unsigned long q = x / y;
      unsigned long r = x % y;
      *qp = q;
      *rp = r;
  }
  
  #+END_SRC


  #+BEGIN_SRC asm

  ; void uremdiv(unsigned long x, unsigned long y, unsigned long* qp, unsigned long* rp)
  ; x in %rdi, y in %rsi, qp in %rdx, rp in %rcx
  uremdiv:
    movq   %rdx,%r8    ; copy qp
    movq   %rdi,%rax   ; move x to lower 8 bytes of dividend
    movl   $0,%edx     ; set upper 8 bytes of dividend to 0
    divq   %rsi        ; divide by y
    movq   %rax,(%8)   ; store quotient at qp
    movq   %rdx,(%rcx) ; store remainder at rp
  #+END_SRC


#+AUTHOR: Fei Li
#+EMAIL: wizard@pursuetao.com
* Practice 05

  #+BEGIN_SRC c

  void decode1(long* xp, long* yp, long* zp);
  
  #+END_SRC


  #+BEGIN_SRC asm
  
  ; void decode1(long* xp, long* yp, long* zp)
  ; xp in %rdi, yp in %rsi, zp in %rdx
  decode1:
    movq (%rdi),%r8
    movq (%rsi),%rcx
    movq (%rdx),%rax
    movq %r8,(%rsi)     ; yp = xp
    movq %rcx,(%rdx)    ; zp = yp
    movq %rax,(%rdi)    ; xp = zp
    ret
  
  #+END_SRC


  #+BEGIN_SRC c

  void decode1(long* xp, long* yp, long* zp)
  {
      long x = *xp;
      long y = *yp;
      long z = *zp;
      
      *xp = z;
      *yp = x;
      *zp = y;
  }
  
  #+END_SRC

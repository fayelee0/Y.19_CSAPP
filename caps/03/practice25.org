#+AUTHOR: Fei Li
#+EMAIL: wizard@pursuetao.com
* Practice 25

  #+BEGIN_SRC c

  long loop_while2(long a, long b)
  {
      long result = ;
      while () {
          result = ;
          b = ;
      }
      return result;
  }
  
  #+END_SRC


  #+BEGIN_SRC asm

  ; long loop_while2(long a, long b)
  ; a in %rdi, b in %rsi
  loop_while2:
    testq   %rsi,%rsi         ; b:b
    jle     .L8               ; if (b <= 0) goto .L8
    movq    %rsi,%rax         ; result = b
  .L7:
    imulq   %rdi,%rax         ; result = result * a
    subq    %rdi,%rsi         ; b = b - a
    testq   %rsi,%rsi         ; b:b
    jg      .L7               ; if (b > 0) goto .L7
    rep; ret
  .L8:
    movq    %rsi,%rax         ; result = b
    ret
  #+END_SRC


  #+BEGIN_SRC c

  long loop_while2(long a, long b)
  {
      long result = b;
      while (b > 0) {
          result = result * a;
          b = b - a;
      }
      return result;
  }
  
  #+END_SRC

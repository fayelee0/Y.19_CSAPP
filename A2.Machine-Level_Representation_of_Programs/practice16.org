#+TITLE: Practice 16

#+BEGIN_SRC c

void cond(long a, long *p)
{
    if (p && a > *p) {
        *p = a;
    }
}

#+END_SRC

#+BEGIN_SRC asm

.void cond(long a, long *p)
.a in %rdi, p in %rsi
cond:
  testq %rsi, %rsi
  je    .L1
  cmpq  %rdi, (%rsi)
  jge   .L1
  movq  %rdi, (%rsi)
.L1:
  rep; ret

#+END_SRC

#+BEGIN_SRC c

void cond(long a, long *p)
{
    if (p == NULL) {
        goto done;
    }

    if (*p >= a) {
        goto done;
    }

    *p = a;
    
done:
    return;
}

#+END_SRC
